## Question 04

在 `hello-bufer-config.py` 程序运行期间，使用 `bpftool` 将该程序固定到 BPF 文件系统，命令如下：`bpftool prog pin name hello /sys/fs/bpf/hi`。

退出正在运行的程序，然后执行 `bpftool prog list` 命令，检查 hello 程序是否仍加载在内核中。

你可以通过执行 `rm /sys/fs/bpf/hi` 命令删除这个固定链接，完成清理工作。

## Answer

1. 运行 `./hello-buffer-config.py`

```sh
$ cd chapter4
$ ./hello-buffer-config.py
```

2. 使用 `bpftool` 将该程序固定到 BPF 文件系统

```sh
$ bpftool prog pin name hello /sys/fs/bpf/hi
```

3. 退出 `./hello-buffer-config.py`

4. 检查 hello 程序是否仍加载在内存中

```sh
$ bpftool prog list
...
86: kprobe  name hello  tag ce68c6b13b45c753  gpl
        loaded_at 2025-12-23T14:23:46+0800  uid 0
        xlated 392B  jited 216B  memlock 4096B  map_ids 55,54
        btf_id 76
```

5. 删除 pin

```sh
$ rm /sys/fs/bpf/hi
```

6. 再次检查 hello 程序是否仍加载在内存中

```sh
$ bpftool prog list
```